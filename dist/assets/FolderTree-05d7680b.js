import{aZ as k,b as $,x as t,L as K,S as d,Q as s,av as O,M as v,I as y,bu as N,J as M,K as x,O as I,R as B,B as h,ao as H,de as Q,dA as U,b9 as X,dB as Z,_ as q,dC as G,H as _,D as Y,dD as p,aC as f,aO as S,ah as ee,$ as te,am as R,i as ne,ai as re,W as oe,j as ae,dE as le,br as ce}from"./index-9fd26ee3.js";import{w as de,j as ue}from"./index-eb1ba41e.js";const T=le(),D=e=>{var o;const[l,n]=h("/");return(o=e.handle)==null||o.call(e,{setPath:n}),t(H,{class:"folder-tree-box",w:"$full",overflowX:"auto",get children(){return t(T.Provider,{get value(){return{value:l,onChange:r=>{n(r),e.onChange(r)},autoOpen:e.autoOpen??!1,forceRoot:e.forceRoot??!1,showEmptyIcon:e.showEmptyIcon??!1,showHiddenFolder:e.showHiddenFolder??!0}},get children(){return t(E,{path:"/"})}})}})},E=e=>{const{isHidePath:l}=Q(),[n,o]=h(),{value:r,onChange:u,forceRoot:a,autoOpen:z,showEmptyIcon:P,showHiddenFolder:V}=U(T),j=()=>{var c;return!!(P&&n()!==void 0&&!((c=n())!=null&&c.length))},[A,J]=X(()=>Z(e.path,q(),a));let C=!1;const w=async()=>{var F;if((F=n())!=null&&F.length)return;const c=await J();ce(c,W=>{C=!0,o(W)},()=>{i()&&g()})},{isOpen:i,onToggle:g}=k(),m=()=>r()===e.path,b=G(e.path);_(Y(r,async c=>{z&&b(c)&&(i()||g(),C||w())}));const L=()=>l(e.path)&&!b(r());return t(d,{get when(){return V||!L()},get children(){return t(H,{get children(){return[t(O,{spacing:"$2",get children(){return[t(d,{get when(){return!A()},get fallback(){return t(p,{size:"sm",get color(){return f()}})},get children(){return t(d,{get when(){return!j()},get fallback(){return t(S,{get color(){return f()},as:de})},get children(){return t(S,{get color(){return f()},as:ue,get transform(){return i()?"rotate(90deg)":"none"},transition:"transform 0.2s",cursor:"pointer",onClick:()=>{g(),i()&&w()}})}})}}),t(ee,{css:{whiteSpace:"nowrap"},fontSize:"$md",cursor:"pointer",px:"$1",rounded:"$md",get bgColor(){return m()?"$info8":"transparent"},get _hover(){return{bgColor:m()?"$info8":te()}},onClick:()=>{u(e.path)},get children(){return R(()=>e.path==="/",!0)()?"root":ne(e.path)}})]}}),t(d,{get when(){return i()},get children(){return t(re,{mt:"$1",pl:"$4",alignItems:"start",spacing:"$1",get children(){return t(oe,{get each(){return n()},children:c=>t(E,{get path(){return ae(e.path,c.name)}})})}})}})]}})}})},ge=e=>{const l=$(),[n,o]=h(e.defaultValue??"/"),[r,u]=h();return _(()=>{var a;e.opened&&((a=r())==null||a.setPath(n()))}),t(B,{size:"xl",blockScrollOnMount:!1,get opened(){return e.opened},get onClose(){return e.onClose},get children(){return[t(v,{}),t(y,{get children(){return[t(M,{w:"$full",css:{overflowWrap:"break-word"},get children(){return e.header}}),t(x,{get children(){return[R(()=>e.children),t(D,{onChange:o,handle:a=>u(a),autoOpen:!0})]}}),t(I,{display:"flex",gap:"$2",get children(){return[t(d,{get when(){return e.footerSlot},get children(){return e.footerSlot}}),t(s,{get onClick(){return e.onClose},colorScheme:"neutral",get children(){return l("global.cancel")}}),t(s,{get loading(){return e.loading},onClick:()=>{var a;return(a=e.onSubmit)==null?void 0:a.call(e,n())},get children(){return l("global.ok")}})]}})]}})]}})},fe=e=>{const{isOpen:l,onOpen:n,onClose:o}=k(),r=$();return[t(O,{w:"$full",spacing:"$2",get children(){return[t(K,{get id(){return e.id},get value(){return e.value},onInput:u=>e.onChange(u.currentTarget.value),get readOnly(){return e.onlyFolder},get onClick(){return e.onlyFolder?n:()=>{}},get placeholder(){return r(`global.${e.onlyFolder?"choose_folder":"choose_or_input_path"}`)}}),t(d,{get when(){return!e.onlyFolder},get children(){return t(s,{onClick:n,get children(){return r("global.choose")}})}})]}}),t(B,{size:"xl",get opened(){return l()},onClose:o,get children(){return[t(v,{}),t(y,{get children(){return[t(N,{}),t(M,{get children(){return r("global.choose_folder")}}),t(x,{get children(){return t(D,{forceRoot:!0,get onChange(){return e.onChange}})}}),t(I,{get children(){return t(s,{onClick:o,get children(){return r("global.confirm")}})}})]}})]}})]};export{D as F,ge as M,fe as a};
